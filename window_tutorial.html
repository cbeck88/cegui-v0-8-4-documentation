<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Crazy Eddie&#39;s GUI System: The Beginners Guide to Creating a CEGUI Window</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Crazy Eddie&#39;s GUI System
   &#160;<span id="projectnumber">0.8.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('window_tutorial.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The Beginners Guide to Creating a <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a> <a class="el" href="classCEGUI_1_1Window.html" title="An abstract base class providing common functionality and specifying the required interface for deriv...">Window</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#window_tutorial_intro">Introduction to window and widget concepts</a><ul><li class="level2"><a href="#window_tutorial_window_base">Every widget is a window</a></li>
<li class="level2"><a href="#window_tutorial_window_inheritance">Many settings are inherited</a></li>
</ul>
</li>
<li class="level1"><a href="#window_tutorial_creating_intro">Creating the windows</a><ul><li class="level2"><a href="#window_tutorial_creating_cpp">GUI Creation via C++ code</a></li>
<li class="level2"><a href="#window_tutorial_creating_xml">XML layouts</a></li>
</ul>
</li>
<li class="level1"><a href="#window_tutorial_conclusion">Conclusion</a></li>
</ul>
</div>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Paul D Turner</dd></dl>
<p>The purpose of this tutorial is to show you how to create a simple window and get it on screen. Before continuing here, it is very important that you have already read and fully understood the articles <a class="el" href="rendering_tutorial.html">The Beginners Guide to Initialising CEGUI</a>, <a class="el" href="resprov_tutorial.html">The Beginners Guide to resource loading with ResourceProviders</a> and <a class="el" href="datafile_tutorial.html">The Beginners Guide to Data Files and Defaults Initialisation</a> because this tutorial builds upon the basic ideas introduced in those previous tutorials.</p>
<p><br/>
 </p>
<h1><a class="anchor" id="window_tutorial_intro"></a>
Introduction to window and widget concepts</h1>
<p>Before we get to the the meat of this tutorial there are some essential ideas that you must first consider.</p>
<h2><a class="anchor" id="window_tutorial_window_base"></a>
Every widget is a window</h2>
<p>This is the most central concept that must be grasped when working with <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a>. Every widget within the system is derived from the same <a class="el" href="classCEGUI_1_1Window.html" title="An abstract base class providing common functionality and specifying the required interface for deriv...">Window</a> base class; so for the purposes of this tutorial, whenever I mention a window, the same ideas could just as easily be applied to a push button or scrollbar widget.</p>
<h2><a class="anchor" id="window_tutorial_window_inheritance"></a>
Many settings are inherited</h2>
<p>Many of the settings and properties available for windows in <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a> are passed down the window hierarchy. For example, if you set the alpha transparency on a particular window to 0.5, then by default, all window and widgets attached to that window will also be affected by the change applied at the higher level; although note also that the actual setting on the child window remains unchanged - the final values and/or settings used are usually some combination of the setting values from all windows in the hierarchy down to the current window. This also applies to things such as window destruction; by default, a window will destroy attached child windows and widgets when it is destroyed. The main advantages of this arrangement are that you can easily affect a the whole GUI by making changes to the root window settings for things like alpha, visibility, enabled / disabled state, and can easily 'clean up' an entire GUI layout by simply destroying the root window. The default 'inherited' behaviours can be overridden on a per window basis where more fine grained control is needed, or where certain advanced management techniques are to be used.</p>
<p><br/>
 </p>
<h1><a class="anchor" id="window_tutorial_creating_intro"></a>
Creating the windows</h1>
<p>Enough of the waffle! Let's create a window.</p>
<p>There are two ways of doing this, via C++ code and XML layout files. Each approach is discussed below.</p>
<h2><a class="anchor" id="window_tutorial_creating_cpp"></a>
GUI Creation via C++ code</h2>
<p>All windows in <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a> are created by the <a class="el" href="classCEGUI_1_1WindowManager.html" title="The WindowManager class describes an object that manages creation and lifetime of Window objects...">WindowManager</a> singleton object. You can get access to this object via the WindowManager::getSingleton function: </p>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span>CEGUI;</div>
<div class="line"><a class="code" href="classCEGUI_1_1WindowManager.html">WindowManager</a>&amp; wmgr = WindowManager::getSingleton();</div>
</div><!-- fragment --><p>In general, you will be using what is known as a <a class="el" href="classCEGUI_1_1DefaultWindow.html" title="Window class intended to be used as a simple, generic Window. ">DefaultWindow</a> as the 'root' window in your GUI layouts. This is not required, but has a couple of useful benefits as regards to input handling, is the accepted pattern of usage for <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a> and, once you start adding more top-level windows, helps simplify laying things out.</p>
<p>So, to get the ball rolling, we'll create a <a class="el" href="classCEGUI_1_1DefaultWindow.html" title="Window class intended to be used as a simple, generic Window. ">DefaultWindow</a> as set it as the root window for the initial, default <a class="el" href="classCEGUI_1_1GUIContext.html">GUIContext</a>: </p>
<div class="fragment"><div class="line">Window* myRoot = wmgr.createWindow( <span class="stringliteral">&quot;DefaultWindow&quot;</span>, <span class="stringliteral">&quot;root&quot;</span> );</div>
<div class="line"><a class="code" href="classCEGUI_1_1System.html#a8d059b018d621be0e4b98d069421426f">System::getSingleton</a>().getDefaultGUIContext().setRootWindow( myRoot );</div>
</div><!-- fragment --><p>The <a class="el" href="classCEGUI_1_1WindowManager.html#a4cbf9d34edb1829f7a1b7cce9b42eab1" title="Creates a new Window object of the specified type, and gives it the specified unique name...">WindowManager::createWindow</a> function takes two strings as its parameters. The first one, <code>"DefaultWindow"</code> in this example, tells the system the type or class of the window you wish to create. Generally, the windows you have available are those which were registered when you loaded your scheme file, although some, like <a class="el" href="classCEGUI_1_1DefaultWindow.html" title="Window class intended to be used as a simple, generic Window. ">DefaultWindow</a>, are global types and are always available. The second parameter, <code>"root"</code> in this example, is a name which will be assigned to the window. Note that naming your root window "root" is not required, but is a common convention.</p>
<p>The GUIContext::setRootWindow function is used, unsurprisingly, to specify a window to be used as the root of the GUI for a given <a class="el" href="classCEGUI_1_1GUIContext.html">GUIContext</a>. This will replace any current root window, although do note that the previous window hierarchy is not actually destroyed - it is just detached from the <a class="el" href="classCEGUI_1_1GUIContext.html">GUIContext</a> - you can easily switch between GUI 'pages' by flipping between them using the GUIContext::setRootWindow function.</p>
<p>Now you have created your first window and attached it to the <a class="el" href="classCEGUI_1_1GUIContext.html">GUIContext</a>; the system will use this window as the root of the GUI when it draws the GUI. But if you were to compile a simple program using this code, you still can't see anything; what gives? There's nothing wrong with your application, the <a class="el" href="classCEGUI_1_1DefaultWindow.html" title="Window class intended to be used as a simple, generic Window. ">DefaultWindow</a> which we created above is just totally invisible! This is what makes the <a class="el" href="classCEGUI_1_1DefaultWindow.html" title="Window class intended to be used as a simple, generic Window. ">DefaultWindow</a> ideally suited as a root window; it serves as a blank canvas onto which other window and widgets can be attached. Let's do that now...</p>
<p>Here we will create a frame window; this is a window that functions in a similar manner to the windows on your desktop UI, it has a title bar and can be moved and re-sized. </p>
<div class="fragment"><div class="line">FrameWindow* fWnd = <span class="keyword">static_cast&lt;</span>FrameWindow*<span class="keyword">&gt;</span>(</div>
<div class="line">    wmgr.createWindow( <span class="stringliteral">&quot;TaharezLook/FrameWindow&quot;</span>, <span class="stringliteral">&quot;testWindow&quot;</span> ));</div>
</div><!-- fragment --><p>here we are creating a <code>"TaharezLook/FrameWindow"</code> window. This name uses another convention seen throughout the system, whereby a window type is prefixed by the name of the widget set (if you were to load the WindowsLook scheme, you could create a <code>"WindowsLook/FrameWindow"</code> object instead). We have given our new window the simple test name of <code>"testWindow"</code>. One final thing to note is the use of the cast, this is required since the <a class="el" href="classCEGUI_1_1WindowManager.html#a4cbf9d34edb1829f7a1b7cce9b42eab1" title="Creates a new Window object of the specified type, and gives it the specified unique name...">WindowManager::createWindow</a> function always returns a the <a class="el" href="classCEGUI_1_1Window.html" title="An abstract base class providing common functionality and specifying the required interface for deriv...">Window</a> type. In this - and many other - cases a basic <a class="el" href="classCEGUI_1_1Window.html" title="An abstract base class providing common functionality and specifying the required interface for deriv...">Window</a> pointer will suffice, but there are times when you'll want to access functions introduced in the sub-classes, so the use of the cast as shown is common when using <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a>.</p>
<p>In order for the system to be able to do something useful with our new window, we must perform a few additional steps.</p>
<p>First, we must attach the window to the root window we established above: </p>
<div class="fragment"><div class="line">myRoot-&gt;addChild( fWnd );</div>
</div><!-- fragment --><p>Now we can set an initial position and size for our window. <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a> uses a 'unified' co-ordinate system enabling the use of relative (scale) and absolute (offset) components at the same time - this is why each co-ordinate you will see has two parts. For a slightly extended introduction of this concept see <a class="el" href="fal_intro.html#fal_unifiedsystem">The Unified Co-ordinate System</a> which is part of the <a class="el" href="fal_man.html">Falagard skinning system for CEGUI</a>. Back to the example: </p>
<div class="fragment"><div class="line"><span class="comment">// position a quarter of the way in from the top-left of parent.</span></div>
<div class="line">fWnd-&gt;setPosition( UVector2( UDim( 0.25f, 0.0f ), UDim( 0.25f, 0.0f ) ) );</div>
<div class="line"></div>
<div class="line"><span class="comment">// set size to be half the size of the parent</span></div>
<div class="line">fWnd-&gt;setSize( USize( UDim( 0.5f, 0.0f ), UDim( 0.5f, 0.0f ) ) );</div>
</div><!-- fragment --><p>Finally, we set a caption for the frame window's title bar: </p>
<div class="fragment"><div class="line">fWnd-&gt;setText( <span class="stringliteral">&quot;Hello World!&quot;</span> );</div>
</div><!-- fragment --><p> And that's it! When compiled into an application, you will now see a simple frame window in the middle of the display.</p>
<p>Note that now you have your <a class="el" href="classCEGUI_1_1FrameWindow.html" title="Abstract base class for a movable, sizable, window with a title-bar and a frame. ">FrameWindow</a> "testWindow" attached to your <a class="el" href="classCEGUI_1_1DefaultWindow.html" title="Window class intended to be used as a simple, generic Window. ">DefaultWindow</a> "root". As such, now would be a good time to mention <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a>'s name paths. As your layouts become more complex, you will often need to access some child window given a known starting point (usually the root window), this is where <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a>'s name paths shine. Each window has a name path which is basically the names of all ancestor windows separated by a slash character. In our example the name path of the <a class="el" href="classCEGUI_1_1FrameWindow.html" title="Abstract base class for a movable, sizable, window with a title-bar and a frame. ">FrameWindow</a> is "root/testWindow". You can access any window within a hierarchy by way of its name path and the <a class="el" href="classCEGUI_1_1Window.html#a0cb7bbd1d102157e0a6c474405d7cd53" title="return the attached child window that the given name path references. ">CEGUI::Window::getChild</a> function. When requesting a child window, note that the path you specify is <em>exclusive</em> of the starting point, so to access the <a class="el" href="classCEGUI_1_1FrameWindow.html" title="Abstract base class for a movable, sizable, window with a title-bar and a frame. ">FrameWindow</a> from <code>"root"</code> you ask for the child <code>"testWindow"</code> and not <code>"root/testWindow"</code>, but if the <a class="el" href="classCEGUI_1_1FrameWindow.html" title="Abstract base class for a movable, sizable, window with a title-bar and a frame. ">FrameWindow</a> had, say, a button attached to it named <code>"myButton"</code> to access that button from the root you would call <a class="el" href="classCEGUI_1_1Window.html#a0cb7bbd1d102157e0a6c474405d7cd53" title="return the attached child window that the given name path references. ">Window::getChild</a> with the name path <code>"testWindow/myButton"</code> </p>
<p><br/>
 </p>
<h2><a class="anchor" id="window_tutorial_creating_xml"></a>
XML layouts</h2>
<p>All of the above is very nice, but there is one major drawback; any time you wish to adjust the GUI layout, you need to edit your code and recompile. This will get old pretty quick, so what you really want is to be able to specify your GUI layout externally, and have your code load the layout via a file. This is the purpose of the <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a> layout XML files.</p>
<p>The system supports XML layout files, which can be loaded via the WindowManager::loadWindowLayout function. This function creates all the windows for you and returns a pointer to the root window of the loaded hierarchy - which is ideal for assigning as the root of the GUI!</p>
<p>So, first of all we need a layout file. The following XML saved as a text file, is a layout file equivalent to the code we discussed above: </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> ?&gt;</div>
<div class="line">&lt;GUILayout version=<span class="stringliteral">&quot;4&quot;</span>&gt;</div>
<div class="line">    &lt;Window type=<span class="stringliteral">&quot;DefaultWindow&quot;</span> name=<span class="stringliteral">&quot;root&quot;</span>&gt;</div>
<div class="line">        &lt;Window type=<span class="stringliteral">&quot;TaharezLook/FrameWindow&quot;</span> name=<span class="stringliteral">&quot;testWindow&quot;</span>&gt;</div>
<div class="line">            &lt;Property name=<span class="stringliteral">&quot;UnifiedPosition&quot;</span> value=<span class="stringliteral">&quot;{ {0.25, 0}, {0.25, 0} }&quot;</span> /&gt;</div>
<div class="line">            &lt;Property name=<span class="stringliteral">&quot;UnifiedSize&quot;</span> value=<span class="stringliteral">&quot;{ {0.5, 0}, {0.5, 0} }&quot;</span> /&gt;</div>
<div class="line">            &lt;Property name=<span class="stringliteral">&quot;Text&quot;</span> value=<span class="stringliteral">&quot;Hello World!&quot;</span> /&gt;</div>
<div class="line">        &lt;/Window&gt;</div>
<div class="line">    &lt;/Window&gt;</div>
<div class="line">&lt;/GUILayout&gt;</div>
</div><!-- fragment --><p>The <a class="el" href="classCEGUI_1_1Window.html" title="An abstract base class providing common functionality and specifying the required interface for deriv...">Window</a> elements show an obvious mapping to the <a class="el" href="classCEGUI_1_1WindowManager.html#a4cbf9d34edb1829f7a1b7cce9b42eab1" title="Creates a new Window object of the specified type, and gives it the specified unique name...">WindowManager::createWindow</a> function - they take a type and a name which directly correspond to the parameters discussed previously.</p>
<p>Nesting of the <a class="el" href="classCEGUI_1_1Window.html" title="An abstract base class providing common functionality and specifying the required interface for deriv...">Window</a> elements is used to attach certain windows to others. Note that you may only have one 'root' level window in a layout file, which is another reason you'll usually see the <a class="el" href="classCEGUI_1_1DefaultWindow.html" title="Window class intended to be used as a simple, generic Window. ">DefaultWindow</a> used as a canvas on which other windows and widgets are placed.</p>
<p>The <a class="el" href="classCEGUI_1_1Property.html" title="An abstract class that defines the interface to access object properties by name. ...">Property</a> elements are used to set properties on the <a class="el" href="classCEGUI_1_1Window.html" title="An abstract base class providing common functionality and specifying the required interface for deriv...">Window</a> being defined. There are many properties available for each window/widget class, and each class also inherits all properties from it's parent class.</p>
<p>If saved as a file called "test.layout", you could load this layout and set it as the <a class="el" href="classCEGUI_1_1GUIContext.html">GUIContext</a> root as follows: </p>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span>CEGUI;</div>
<div class="line"><a class="code" href="classCEGUI_1_1Window.html">Window</a>* myRoot = WindowManager::getSingleton().loadLayoutFromFile( <span class="stringliteral">&quot;test.layout&quot;</span> );</div>
<div class="line"><a class="code" href="classCEGUI_1_1System.html#a8d059b018d621be0e4b98d069421426f">System::getSingleton</a>().getDefaultGUIContext().setRootWindow( myRoot );</div>
</div><!-- fragment --><p>The end result is exactly the same as what was done in C++ code earlier, except that now you can modify and enhance the GUI layout without the need for constant editing and recompilation of the application code.</p>
<p><br/>
 </p>
<h1><a class="anchor" id="window_tutorial_conclusion"></a>
Conclusion</h1>
<p>Here you have seen how to perform basic window creation, how to create a simple window hierarchy, and how modify some window settings. You have seen how this can be accomplished using both C++ code and external XML layout files. There are many advanced possibilities available using both methods, although such possibilities are beyond the scope of this indroductory tutorial. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jul 7 2014 10:16:39 for Crazy Eddie&#39;s GUI System by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
