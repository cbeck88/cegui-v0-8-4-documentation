<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Crazy Eddie&#39;s GUI System: Introduction to Falagard &#39;looknfeel&#39; XML</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Crazy Eddie&#39;s GUI System
   &#160;<span id="projectnumber">0.8.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fal_tut1.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Introduction to Falagard 'looknfeel' XML </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Before we get to the good stuff, I'd just like to point out that this section (or, indeed, the entire document) is not intended to teach you anything about XML in general. It is assumed the reader has some familiarity with XML and how to use it properly.</p>
<h1><a class="anchor" id="fal_tut1_empty_skin"></a>
Before we begin: An empty skin</h1>
<p>Before we can start adding widget skins, or WidgetLooks as they are known in the system, to our XML file, we need the basic file outline initialised. This is extremely trivial, and looks like this: </p>
<div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> ?&gt;</div>
<div class="line">&lt;Falagard version=<span class="stringliteral">&quot;7&quot;</span>&gt;</div>
<div class="line">&lt;/Falagard&gt;</div>
</div><!-- fragment --><p>We will be placing our WidgetLook definitions between the <code>&lt;Falagard&gt;&lt;/Falagard&gt;</code> pair. It is possible to specify as many sub-elements as we require within these tags, so all of our definitions can go into a single file (in most cases this ends up being a very large file!)</p>
<h1><a class="anchor" id="fal_tut1_button"></a>
Starting Simple: A Button</h1>
<p>Without a doubt, the humble push button is the most common widget we're ever likely to see; without this workhorse, any UI would be virtually useless. So, this is where we will start.</p>
<p>To define any widget skin, you use the WidgetLook element and specify a name for the widget type that you're defining by using the name attribute. So we'll start off by adding the following empty WidgetLook to our initial skin file: </p>
<div class="fragment"><div class="line">&lt;WidgetLook name=<span class="stringliteral">&quot;TaharezLook/Button&quot;</span>&gt;</div>
<div class="line">&lt;/WidgetLook&gt;</div>
</div><!-- fragment --><p>As you can see from the reference for the Falagard/Button window renderer, we are required to specify imagery for numerous states, namely these are: </p>
<ul>
<li><code>Normal</code> </li>
<li><code>Hover</code> </li>
<li><code>Pushed</code> </li>
<li><code>Disabled</code> </li>
</ul>
<p>Since we now know what states are required for the widget, it's a good idea to add the framework for these first; this effectively makes the WidgetLook complete and usable, although obviously nothing would be drawn for it at this stage since we have not defined any imagery. So, we add empty StateImagery elements for the required states, and we end up with this: </p>
<div class="fragment"><div class="line">&lt;WidgetLook name=<span class="stringliteral">&quot;TaharezLook/Button&quot;</span>&gt;</div>
<div class="line"></div>
<div class="line">  &lt;StateImagery name=<span class="stringliteral">&quot;Normal&quot;</span>&gt;</div>
<div class="line">  &lt;/StateImagery&gt;</div>
<div class="line"></div>
<div class="line">  &lt;StateImagery name=<span class="stringliteral">&quot;Hover&quot;</span>&gt;</div>
<div class="line">  &lt;/StateImagery&gt;</div>
<div class="line"></div>
<div class="line">  &lt;StateImagery name=<span class="stringliteral">&quot;Pushed&quot;</span>&gt;</div>
<div class="line">  &lt;/StateImagery&gt;</div>
<div class="line"></div>
<div class="line">  &lt;StateImagery name=<span class="stringliteral">&quot;Disabled&quot;</span>&gt;</div>
<div class="line">  &lt;/StateImagery&gt;</div>
<div class="line"></div>
<div class="line">&lt;/WidgetLook&gt;</div>
</div><!-- fragment --><p>To specify rendering to be used for a widget, we use the ImagerySection element. Each imagery section is given a name; this name is used later to 'include' the imagery section within layers defined for each of the state imagery definitions.</p>
<p>For our button, we will have an imagery section for each of the button states. We can add the outline of these to our existing, work-in-progress, widget-look: </p>
<div class="fragment"><div class="line">&lt;WidgetLook name=<span class="stringliteral">&quot;TaharezLook/Button&quot;</span>&gt;</div>
<div class="line"></div>
<div class="line">  &lt;ImagerySection name=<span class="stringliteral">&quot;normal_imagery&quot;</span>&gt;</div>
<div class="line">  &lt;/ImagerySection&gt;</div>
<div class="line"></div>
<div class="line">  &lt;ImagerySection name=<span class="stringliteral">&quot;hover_imagery&quot;</span>&gt;</div>
<div class="line">  &lt;/ImagerySection&gt;</div>
<div class="line"></div>
<div class="line">  &lt;ImagerySection name=<span class="stringliteral">&quot;pushed_imagery&quot;</span>&gt;</div>
<div class="line">  &lt;/ImagerySection&gt;</div>
<div class="line"></div>
<div class="line">  &lt;StateImagery name=<span class="stringliteral">&quot;Normal&quot;</span>&gt;</div>
<div class="line">  &lt;/StateImagery&gt;</div>
<div class="line"></div>
<div class="line">  &lt;StateImagery name=<span class="stringliteral">&quot;Hover&quot;</span>&gt;</div>
<div class="line">  &lt;/StateImagery&gt;</div>
<div class="line"></div>
<div class="line">  &lt;StateImagery name=<span class="stringliteral">&quot;Pushed&quot;</span>&gt;</div>
<div class="line">  &lt;/StateImagery&gt;</div>
<div class="line"></div>
<div class="line">  &lt;StateImagery name=<span class="stringliteral">&quot;Disabled&quot;</span>&gt;</div>
<div class="line">  &lt;/StateImagery&gt;</div>
<div class="line"></div>
<div class="line">&lt;/WidgetLook&gt;</div>
</div><!-- fragment --><p>Now we can start to define the ImageyComponents for each section; this will tell the system how we want our button to appear on screen.</p>
<p>The imagery for TaharezLook gives us three sections for each button state (except Disabled; for this we'll just re-use the 'normal_imagery' and use some different colours!). The available imagery sections give us a left end, a right end, and a middle section.</p>
<p>There are various ways that we can approach applying these image sections to the widget; although the intended use is to have the end pieces drawn at their 'natural' horizontal size and the middle section stretched to fill the space in between the two ends. This all sounds simple enough, although there is one issue; the actual pixel sizes of the imagery is not fixed. The TaharezLook imageset uses the auto-scaling feature, which means that the source images will have variable sizes dependant upon the display resolution. All this needs to be taken into account when specifying the imagery; this way we ensure the results will be what we expect - at all resolutions.</p>
<p>To specify an image to be drawn, we use the ImageryComponent element. This should be added as a sub-element of ImagerySection. So we'll start by adding an empty imagery component to the definition for 'normal_imagery': </p>
<div class="fragment"><div class="line">...</div>
<div class="line">&lt;ImagerySection name=<span class="stringliteral">&quot;normal_imagery&quot;</span>&gt;</div>
<div class="line"></div>
<div class="line">  &lt;ImageryComponent&gt;</div>
<div class="line">  &lt;/ImageryComponent&gt;</div>
<div class="line"></div>
<div class="line">&lt;/ImagerySection&gt;</div>
<div class="line">...</div>
</div><!-- fragment --><p>The first thing we need to add to the ImageryComponent is an area definition telling the system where this image should be drawn: </p>
<div class="fragment"><div class="line">&lt;ImageryComponent&gt;</div>
<div class="line"></div>
<div class="line">  &lt;Area&gt;</div>
<div class="line">  &lt;/Area&gt;</div>
<div class="line"></div>
<div class="line">&lt;/ImageryComponent&gt;</div>
</div><!-- fragment --><p>We'll start by placing the image for the left end of the button. This is the simplest component to place, since its position is known as being (0, 0). To specify these absolute values, we use the AbsoluteDim element.</p>
<p>We start defining the required dimensions for our image area by using the Dim element, and using AbsoluteDim sub-element to indicate values to be used: </p>
<div class="fragment"><div class="line">&lt;ImageryComponent&gt;</div>
<div class="line">  &lt;Area&gt;</div>
<div class="line"></div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;LeftEdge&quot;</span>&gt;</div>
<div class="line">      &lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line"></div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;TopEdge&quot;</span>&gt;</div>
<div class="line">      &lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line"></div>
<div class="line">  &lt;/Area&gt;</div>
<div class="line">&lt;/ImageryComponent&gt;</div>
</div><!-- fragment --><p>We have defined the left and top edges which gives our image its position. Next we will specify dimensions to establish the area size.</p>
<p>We want the width of the area to come from the source image itself, to do this we use the ImageDim element and tell it to access the image that we will be using for this component: </p>
<div class="fragment"><div class="line">&lt;Dim type=<span class="stringliteral">&quot;Width&quot;</span>&gt;</div>
<div class="line"></div>
<div class="line">  &lt;ImageDim</div>
<div class="line">    imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span></div>
<div class="line">    image=<span class="stringliteral">&quot;ButtonLeftNormal&quot;</span></div>
<div class="line">    dimension=<span class="stringliteral">&quot;Width&quot;</span></div>
<div class="line">  /&gt;</div>
<div class="line"></div>
<div class="line">&lt;/Dim&gt;</div>
</div><!-- fragment --><p>This tells the system that for the width of the area being defined, use the width of the image named ButtonLeftNormal from the TaharezLook imageset.</p>
<p>The last part of our area is the height. This is another simple thing to specify, since we want the height to be the same as the full height of the widget being defined. We could use either the UnifiedDim element or the WidgetDim element for this purpose; we'll use the UnifiedDim here as it does not need to look up the widget by name and so is likely more economical:</p>
<div class="fragment"><div class="line">&lt;Dim type=<span class="stringliteral">&quot;Height&quot;</span>&gt;</div>
<div class="line"></div>
<div class="line">  &lt;UnifiedDim scale=<span class="stringliteral">&quot;1.0&quot;</span> type=<span class="stringliteral">&quot;Height&quot;</span> /&gt;</div>
<div class="line"></div>
<div class="line">&lt;/Dim&gt;</div>
</div><!-- fragment --><p>Here we use a scale value of 1.0 to indicate we want the full height of the widget.</p>
<p>Now we have completed our area definition for this first image, and it looks like this: </p>
<div class="fragment"><div class="line">&lt;ImageryComponent&gt;</div>
<div class="line">  &lt;Area&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;LeftEdge&quot;</span>&gt;</div>
<div class="line">      &lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;TopEdge&quot;</span>&gt;</div>
<div class="line">      &lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;Width&quot;</span>&gt;</div>
<div class="line">      &lt;ImageDim</div>
<div class="line">        imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span></div>
<div class="line">        image=<span class="stringliteral">&quot;ButtonLeftNormal&quot;</span></div>
<div class="line">        dimension=<span class="stringliteral">&quot;Width&quot;</span></div>
<div class="line">      /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;Height&quot;</span>&gt;</div>
<div class="line">      &lt;UnifiedDim scale=<span class="stringliteral">&quot;1.0&quot;</span> type=<span class="stringliteral">&quot;Height&quot;</span> /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line">  &lt;/Area&gt;</div>
<div class="line">&lt;/ImageryComponent&gt;</div>
</div><!-- fragment --><p>The next thing we need to do here is tell the system which image it should draw, this is done by using the Image element, and this should be placed immediately after the area definition: </p>
<div class="fragment"><div class="line">...</div>
<div class="line">&lt;Image imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span> image=<span class="stringliteral">&quot;ButtonLeftNormal&quot;</span> /&gt;</div>
<div class="line">...</div>
</div><!-- fragment --><p>The final element that we need to add to this ImageryComponent definition is the VertFormat element. Using this we will tell the system to stretch the image vertically so that it covers the full height of our defined area: </p>
<div class="fragment"><div class="line">...</div>
<div class="line">&lt;VertFormat type=<span class="stringliteral">&quot;Stretched&quot;</span> /&gt;</div>
<div class="line">...</div>
</div><!-- fragment --><p>This completes the definition for the left end of the button, and the final xml for this component looks like this: </p>
<div class="fragment"><div class="line">&lt;ImageryComponent&gt;</div>
<div class="line">  &lt;Area&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;LeftEdge&quot;</span>&gt;</div>
<div class="line">      &lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;TopEdge&quot;</span>&gt;</div>
<div class="line">      &lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;Width&quot;</span>&gt;</div>
<div class="line">      &lt;ImageDim</div>
<div class="line">        imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span></div>
<div class="line">        image=<span class="stringliteral">&quot;ButtonLeftNormal&quot;</span></div>
<div class="line">        dimension=<span class="stringliteral">&quot;Width&quot;</span></div>
<div class="line">      /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;Height&quot;</span>&gt;</div>
<div class="line">      &lt;UnifiedDim scale=<span class="stringliteral">&quot;1.0&quot;</span> type=<span class="stringliteral">&quot;Height&quot;</span> /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line">  &lt;/Area&gt;</div>
<div class="line">  &lt;Image imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span> image=<span class="stringliteral">&quot;ButtonLeftNormal&quot;</span> /&gt;</div>
<div class="line">  &lt;VertFormat type=<span class="stringliteral">&quot;Stretched&quot;</span> /&gt;</div>
<div class="line">&lt;/ImageryComponent&gt;</div>
</div><!-- fragment --><p>The next image we will set up is the right end. To show another approach for image placement, rather than precisely defining the area where the image will appear, here we will define the target area as covering the entire widget and use the image alignment formatting to draw the image on the right hand side of the widget.</p>
<p>The area definition that specifies the entire widget is something that you'll likely use a lot, and looks like this: </p>
<div class="fragment"><div class="line">&lt;Area&gt;</div>
<div class="line">  &lt;Dim type=<span class="stringliteral">&quot;LeftEdge&quot;</span>&gt;&lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">  &lt;Dim type=<span class="stringliteral">&quot;TopEdge&quot;</span>&gt;&lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">  &lt;Dim type=<span class="stringliteral">&quot;Width&quot;</span>&gt;&lt;UnifiedDim scale=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;Width&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">  &lt;Dim type=<span class="stringliteral">&quot;Height&quot;</span>&gt;&lt;UnifiedDim scale=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;Height&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">&lt;/Area&gt;</div>
</div><!-- fragment --><p>Next comes comes the image specification: </p>
<div class="fragment"><div class="line">&lt;Image imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span> image=<span class="stringliteral">&quot;ButtonRightNormal&quot;</span> /&gt;</div>
</div><!-- fragment --><p>Then the vertical formatting option: </p>
<div class="fragment"><div class="line">&lt;VertFormat type=<span class="stringliteral">&quot;Stretched&quot;</span> /&gt;</div>
</div><!-- fragment --><p>Finally, we add the horizontal formatting option which tells the system to align this image on the right edge of the defined area: </p>
<div class="fragment"><div class="line">&lt;HorzFormat type=<span class="stringliteral">&quot;RightAligned&quot;</span> /&gt;</div>
</div><!-- fragment --><p>The completed definition for the right end image now looks like this: </p>
<div class="fragment"><div class="line">&lt;ImageryComponent&gt;</div>
<div class="line"></div>
<div class="line">  &lt;Area&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;LeftEdge&quot;</span>&gt;&lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;TopEdge&quot;</span>&gt;&lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;Width&quot;</span>&gt;&lt;UnifiedDim scale=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;Width&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;Height&quot;</span>&gt;&lt;UnifiedDim scale=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;Height&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">  &lt;/Area&gt;</div>
<div class="line"></div>
<div class="line">  &lt;Image imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span> image=<span class="stringliteral">&quot;ButtonRightNormal&quot;</span> /&gt;</div>
<div class="line">  &lt;VertFormat type=<span class="stringliteral">&quot;Stretched&quot;</span> /&gt;</div>
<div class="line">  &lt;HorzFormat type=<span class="stringliteral">&quot;RightAligned&quot;</span> /&gt;</div>
<div class="line"></div>
<div class="line">&lt;/ImageryComponent&gt;</div>
</div><!-- fragment --><p>The last image we need to place for the "normal_imagery" section is the middle section. Remember that we want this image to occupy the space between to two end pieces. The main part of achieving this is to correctly define the destination area for the image.</p>
<p>The vertical aspects of the image definition for the middle section will be the same as for the two ends, and as such these will not be discussed any further.</p>
<p>The first thing we need is to tell the system where the left edge of the middle section should appear. We know that the left edge of the image for the middle section needs to join to the right edge of the image for the left section. To achieve this we can make use of the ImageDim element to get the width of the left end image, and use this as the co-ordinate for the left edge of the middle section area: </p>
<div class="fragment"><div class="line">&lt;Area&gt;</div>
<div class="line">  &lt;Dim type=<span class="stringliteral">&quot;LeftEdge&quot;</span>&gt;</div>
<div class="line">    &lt;ImageDim</div>
<div class="line">      imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span></div>
<div class="line">      image=<span class="stringliteral">&quot;ButtonLeftNormal&quot;</span></div>
<div class="line">      dimension=<span class="stringliteral">&quot;Width&quot;</span></div>
<div class="line">    /&gt;</div>
<div class="line">  &lt;/Dim&gt;</div>
<div class="line">  ...</div>
<div class="line">&lt;/Area&gt;</div>
</div><!-- fragment --><p>Now comes the fun part. Due to the fact we want the skin to operate correctly without knowing ahead of time how large the images are, we must use mathematical calculations in order to establish the required width of the middle section. If we knew for sure the image sizes, this could all be pre-calculated and we could simply use AbsoluteDim to tell the system the width we require. Unfortunately we are not this lucky. We are lucky, however, in the fact that the system provides a means for us to specify, within the XML, what calculations should be done to arrive at the final value for a dimension. The OperatorDim element is what provides this ability.</p>
<p>Before going further we should look at what we need to calculate. The width of the middle section is basically the width of the widget, minus the combined width of the two end sections:</p>
<p><img class="formulaInl" alt="$ middleWidth=widgetWidth-(leftEndWidth+rightEndWidth) $" src="form_1.png"/></p>
<p>However, due to the fact that the area can accept either a width or right edge co-ordinate, we can simplify this a little by specifying the right edge co-ordinate instead of the width. The right edge location for this middle image will be equal to the width of the widget, minus the width of the right end image. So the final calculation we need to do is this:</p>
<p><img class="formulaInl" alt="$ rightEdge=widgetWidth-rightEndWidth $" src="form_2.png"/></p>
<p>The result from both calculations is the same, so wherever possible we will use the simpler option. Since we need to perform some calculation, to specify this in XML we start off with an OperatorDim element that specifies the mathematical operation that we need to perform: </p>
<div class="fragment"><div class="line">&lt;Dim type=<span class="stringliteral">&quot;RightEdge&quot;</span>&gt;</div>
<div class="line"></div>
<div class="line">  &lt;OperatorDim op=<span class="stringliteral">&quot;Subtract&quot;</span>&gt;</div>
<div class="line">  &lt;/OperatorDim&gt;</div>
<div class="line"></div>
<div class="line">&lt;/Dim&gt;</div>
</div><!-- fragment --><p>Next we will specify the first operand, which will be the left side of the operation being defined. In this example this will be the width of the widget: </p>
<div class="fragment"><div class="line">&lt;Dim type=<span class="stringliteral">&quot;RightEdge&quot;</span>&gt;</div>
<div class="line">  &lt;OperatorDim op=<span class="stringliteral">&quot;Subtract&quot;</span>&gt;</div>
<div class="line"></div>
<div class="line">  &lt;UnifiedDim scale=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;Width&quot;</span> /&gt;</div>
<div class="line"></div>
<div class="line">  &lt;/OperatorDim&gt;</div>
<div class="line">&lt;/Dim&gt;</div>
</div><!-- fragment --><p>To complete the dimension specification we just insert a second *Dim element to tell the system what is to be subtracted. In this case it's the width of the image for the right end, so we will use the ImageDim element for this purpose. The final specification for this dimension looks as follows: </p>
<div class="fragment"><div class="line">&lt;Dim type=<span class="stringliteral">&quot;RightEdge&quot;</span>&gt;</div>
<div class="line">  &lt;OperatorDim op=<span class="stringliteral">&quot;Subtract&quot;</span>&gt;</div>
<div class="line">    &lt;UnifiedDim scale=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;Width&quot;</span> /&gt;</div>
<div class="line"></div>
<div class="line">    &lt;ImageDim</div>
<div class="line">      imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span></div>
<div class="line">      image=<span class="stringliteral">&quot;ButtonRightNormal&quot;</span></div>
<div class="line">      dimension=<span class="stringliteral">&quot;Width&quot;</span></div>
<div class="line">    /&gt;</div>
<div class="line"></div>
<div class="line">  &lt;/OperatorDim&gt;</div>
<div class="line">&lt;/Dim&gt;</div>
</div><!-- fragment --><p>It is possible to chain further mathematical operations within the dimension specification. It would have been possible to do our original width calculation using two OperatorDim elements chained together to form an expression tree. The system is flexible enough that any expression using the supported operators can be expressed in this manner.</p>
<p>Anyway, I digress slightly. Lets get back to our button imagery. We now have enough information to define the middle section of the button, which looks like this: </p>
<div class="fragment"><div class="line">&lt;ImageryComponent&gt;</div>
<div class="line">  &lt;Area&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;LeftEdge&quot;</span>&gt;</div>
<div class="line">      &lt;ImageDim</div>
<div class="line">        imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span></div>
<div class="line">        image=<span class="stringliteral">&quot;ButtonLeftNormal&quot;</span></div>
<div class="line">        dimension=<span class="stringliteral">&quot;Width&quot;</span></div>
<div class="line">      /&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;TopEdge&quot;</span>&gt;&lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;RightEdge&quot;</span>&gt;</div>
<div class="line">      &lt;OperatorDim op=<span class="stringliteral">&quot;Subtract&quot;</span>&gt;</div>
<div class="line">        &lt;UnifiedDim scale=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;Width&quot;</span> /&gt;</div>
<div class="line">        &lt;ImageDim</div>
<div class="line">          imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span></div>
<div class="line">          image=<span class="stringliteral">&quot;ButtonRightNormal&quot;</span></div>
<div class="line">          dimension=<span class="stringliteral">&quot;Width&quot;</span></div>
<div class="line">        /&gt;</div>
<div class="line">      &lt;/OperatorDim&gt;</div>
<div class="line">    &lt;/Dim&gt;</div>
<div class="line">    &lt;Dim type=<span class="stringliteral">&quot;Height&quot;</span>&gt;&lt;UnifiedDim scale=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;Height&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">  &lt;/Area&gt;</div>
<div class="line">  &lt;Image imageset=<span class="stringliteral">&quot;TaharezLook&quot;</span> image=<span class="stringliteral">&quot;ButtonMiddleNormal&quot;</span> /&gt;</div>
<div class="line">  &lt;VertFormat type=<span class="stringliteral">&quot;Stretched&quot;</span> /&gt;</div>
<div class="line">  &lt;HorzFormat type=<span class="stringliteral">&quot;Stretched&quot;</span> /&gt;</div>
<div class="line">&lt;/ImageryComponent&gt;</div>
</div><!-- fragment --><p>This completes the imagery within the normal_imagery section. You can now add in the other two sections in the same manner, just replacing the image names used for the hover and pushed imagery as appropriate - everything else will be exactly the same as what you've done for the normal imagery.</p>
<p>Now we can add references to the imagery sections within the elements that define the various states. The imagery for state imagery elements must be specified in layers. It is possible to specify multiple imagery sections to use within each layer, though for most simple cases, you'll only need one layer.</p>
<p>Here we've added the imagery specification for the Normal state: </p>
<div class="fragment"><div class="line">&lt;StateImagery name=<span class="stringliteral">&quot;Normal&quot;</span>&gt;</div>
<div class="line"></div>
<div class="line">  &lt;Layer&gt;</div>
<div class="line">    &lt;Section section=<span class="stringliteral">&quot;normal_imagery&quot;</span> /&gt;</div>
<div class="line">  &lt;/Layer&gt;</div>
<div class="line"></div>
<div class="line">&lt;/StateImagery&gt;</div>
</div><!-- fragment --><p>The Hover and Pushed states are defined in a similar fashion; just replace the name "normal_imagery" with the name of the appropriate imagery section for the state.</p>
<p>The Disabled state is somewhat different though; we do not have any specific imagery for this state, so instead we will re-use the normal_imagery but specify some colours that will be applied to make the button appear darker. This is done by embedding a Colours element within the Section element, as demonstrated here: </p>
<div class="fragment"><div class="line">&lt;StateImagery name=<span class="stringliteral">&quot;Disabled&quot;</span>&gt;</div>
<div class="line">  &lt;Layer&gt;</div>
<div class="line">    &lt;Section section=<span class="stringliteral">&quot;normal_imagery&quot;</span>&gt;</div>
<div class="line"></div>
<div class="line">      &lt;Colours</div>
<div class="line">        topLeft=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">        topRight=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">        bottomLeft=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">        bottomRight=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">      /&gt;</div>
<div class="line"></div>
<div class="line">    &lt;/Section&gt;</div>
<div class="line">  &lt;/Layer&gt;</div>
<div class="line">&lt;/StateImagery&gt;</div>
</div><!-- fragment --><p>Now we have a nice button with imagery defined for all the required states. There's just one thing missing - we need to put some label text on the button.</p>
<p>To specify text, you use the TextComponent element, which goes in an ImagerySection the same as the ImageryComponent elements do. We could have put a TextComponent in each of the imagery sections we defined to display the label, however this is wasteful repetition. A better approach is to define a imagery section what contains the label by itself, then we can re-use that for all of the states.</p>
<p>So, start by defining the containing ImagerySection: </p>
<div class="fragment"><div class="line">...</div>
<div class="line">&lt;ImagerySection name=<span class="stringliteral">&quot;label&quot;</span>&gt;</div>
<div class="line"></div>
<div class="line">  &lt;TextComponent&gt;</div>
<div class="line">  &lt;/TextComponent&gt;</div>
<div class="line"></div>
<div class="line">&lt;/ImagerySection&gt;</div>
<div class="line">...</div>
</div><!-- fragment --><p>The definition of the TextComponent is extremely similar to that of ImageryComponent. We specify an area for the text and the formatting that we require. We can also optionally specify a Text element which is used to explicitly set the font and / or text string to be drawn. Without these explicit settings, these items will be obtained from the base widget itself.</p>
<p>We want our label to be centred within the entire area of the widget, so we need to use the area that defines the entire widget (this was shown above, so will not be repeated here.)</p>
<p>We also need to set the formatting options for the text. For the vertical formatting we will use: </p>
<div class="fragment"><div class="line">&lt;VertFormat type=<span class="stringliteral">&quot;CentreAligned&quot;</span> /&gt;</div>
</div><!-- fragment --><p>And for the horizontal formatting: </p>
<div class="fragment"><div class="line">&lt;HorzFormat type=<span class="stringliteral">&quot;WordWrapCentreAligned&quot;</span> /&gt;</div>
</div><!-- fragment --><p>The final definition for our label imagery section looks like this: </p>
<div class="fragment"><div class="line">&lt;ImagerySection name=<span class="stringliteral">&quot;label&quot;</span>&gt;</div>
<div class="line">  &lt;TextComponent&gt;</div>
<div class="line">    &lt;Area&gt;</div>
<div class="line">      &lt;Dim type=<span class="stringliteral">&quot;LeftEdge&quot;</span>&gt;&lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">      &lt;Dim type=<span class="stringliteral">&quot;TopEdge&quot;</span>&gt;&lt;AbsoluteDim value=<span class="stringliteral">&quot;0&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">      &lt;Dim type=<span class="stringliteral">&quot;Width&quot;</span>&gt;&lt;UnifiedDim scale=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;Width&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">      &lt;Dim type=<span class="stringliteral">&quot;Height&quot;</span>&gt;&lt;UnifiedDim scale=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;Height&quot;</span> /&gt;&lt;/Dim&gt;</div>
<div class="line">    &lt;/Area&gt;</div>
<div class="line">    &lt;VertFormat type=<span class="stringliteral">&quot;CentreAligned&quot;</span> /&gt;</div>
<div class="line">    &lt;HorzFormat type=<span class="stringliteral">&quot;WordWrapCentreAligned&quot;</span> /&gt;</div>
<div class="line">  &lt;/TextComponent&gt;</div>
<div class="line">&lt;/ImagerySection&gt;</div>
</div><!-- fragment --><p>Now all that is left is to add this to the layer specification for the state imagery. Normal state now looks like this (with Hover and Pushed being very similar): </p>
<div class="fragment"><div class="line">&lt;StateImagery name=<span class="stringliteral">&quot;Normal&quot;</span>&gt;</div>
<div class="line">  &lt;Layer&gt;</div>
<div class="line">    &lt;Section section=<span class="stringliteral">&quot;normal_imagery&quot;</span> /&gt;</div>
<div class="line">    &lt;Section section=<span class="stringliteral">&quot;label&quot;</span> /&gt;</div>
<div class="line">  &lt;/Layer&gt;</div>
<div class="line">&lt;/StateImagery&gt;</div>
</div><!-- fragment --><p>And for Disabled we again specify some additional colours: </p>
<div class="fragment"><div class="line">&lt;StateImagery name=<span class="stringliteral">&quot;Disabled&quot;</span>&gt;</div>
<div class="line">  &lt;Layer&gt;</div>
<div class="line">    &lt;Section section=<span class="stringliteral">&quot;normal_imagery&quot;</span>&gt;</div>
<div class="line">      &lt;Colours</div>
<div class="line">        topLeft=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">        topRight=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">        bottomLeft=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">        bottomRight=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">      /&gt;</div>
<div class="line">    &lt;/Section&gt;</div>
<div class="line">    &lt;Section section=<span class="stringliteral">&quot;label&quot;</span>&gt;</div>
<div class="line">      &lt;Colours</div>
<div class="line">        topLeft=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">        topRight=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">        bottomLeft=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">        bottomRight=<span class="stringliteral">&quot;FF7F7F7F&quot;</span></div>
<div class="line">      /&gt;</div>
<div class="line">    &lt;/Section&gt;</div>
<div class="line">  &lt;/Layer&gt;</div>
<div class="line">&lt;/StateImagery&gt;</div>
</div><!-- fragment --><p>This concludes the introduction tutorial. For full examples of this, and all the other WidgetLook specifications, see the example 'looknfeel' files in the <a class="el" href="namespaceCEGUI.html" title="Main namespace for Crazy Eddie&#39;s GUI Library. ">CEGUI</a> distribution, in the directory: <em>cegui_mk2/datafiles/looknfeel/</em> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="fal_man.html">Falagard skinning system for CEGUI</a></li>
    <li class="footer">Generated on Mon Jul 7 2014 10:16:39 for Crazy Eddie&#39;s GUI System by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
